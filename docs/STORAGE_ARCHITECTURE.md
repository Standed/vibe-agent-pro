# å­˜å‚¨æ¶æ„æ–‡æ¡£

## ğŸ“Š æ•´ä½“æ¶æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  Video Agent Pro                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
      â–¼                     â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Supabase â”‚          â”‚Cloudflareâ”‚
â”‚ PostgreSQLâ”‚          â”‚    R2    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â”‚                     â”‚
     â–¼                     â–¼
æ–‡å­—æ•°æ®                åª’ä½“æ–‡ä»¶
- é¡¹ç›®ä¿¡æ¯              - å›¾ç‰‡
- åœºæ™¯æ•°æ®              - è§†é¢‘
- é•œå¤´ä¿¡æ¯              - éŸ³é¢‘
- ç§¯åˆ†è®°å½•
- ç”¨æˆ·æ•°æ®
- åº”ç”¨æ—¥å¿—
```

---

## ğŸ—„ï¸ æ•°æ®å­˜å‚¨ç­–ç•¥

### âš ï¸ æ ¸å¿ƒåŸåˆ™

**Supabase ç»å¯¹ä¸å­˜å‚¨åª’ä½“æ–‡ä»¶æœ¬èº«ï¼Œåªå­˜å‚¨ URL å¼•ç”¨ï¼**

```
âŒ é”™è¯¯ï¼šSupabase å­˜å‚¨å›¾ç‰‡/è§†é¢‘/éŸ³é¢‘çš„äºŒè¿›åˆ¶æ•°æ®æˆ– Base64
âœ… æ­£ç¡®ï¼šSupabase åªå­˜å‚¨ Cloudflare R2 çš„è®¿é—® URLï¼ˆTEXT ç±»å‹ï¼‰
```

---

### 1. Supabase PostgreSQLï¼ˆç»“æ„åŒ–æ•°æ® + URLï¼‰

**å­˜å‚¨å†…å®¹ï¼š**
- âœ… ç”¨æˆ·ä¿¡æ¯å’Œè®¤è¯æ•°æ®
- âœ… é¡¹ç›®å…ƒæ•°æ®ï¼ˆæ ‡é¢˜ã€æè¿°ã€è®¾ç½®ï¼‰
- âœ… åœºæ™¯å’Œé•œå¤´çš„æ–‡æœ¬æè¿°ï¼ˆå¯¹è¯ã€æ—ç™½ã€æç¤ºè¯ï¼‰
- âœ… AI å¯¹è¯å†å²è®°å½•ï¼ˆchat_messages è¡¨ï¼‰
- âœ… ç§¯åˆ†äº¤æ˜“è®°å½•
- âœ… **åª’ä½“æ–‡ä»¶çš„ URL å¼•ç”¨**ï¼ˆTEXT/JSONB å­—æ®µï¼‰

**ä¸å­˜å‚¨å†…å®¹ï¼š**
- âŒ å›¾ç‰‡æ–‡ä»¶æœ¬èº«ï¼ˆ.png, .jpg ç­‰ï¼‰
- âŒ è§†é¢‘æ–‡ä»¶æœ¬èº«ï¼ˆ.mp4, .webm ç­‰ï¼‰
- âŒ éŸ³é¢‘æ–‡ä»¶æœ¬èº«ï¼ˆ.mp3, .wav ç­‰ï¼‰
- âŒ ä»»ä½•äºŒè¿›åˆ¶æ•°æ®æˆ– Base64 ç¼–ç 

**URL å­˜å‚¨ç¤ºä¾‹ï¼š**
```sql
-- shots è¡¨
reference_image: 'https://r2.example.com/user123/shots/1702345678903.jpg'
video_clip: 'https://r2.example.com/user123/videos/1702345678906.mp4'
grid_images: ["https://r2.example.com/...", "https://r2.example.com/..."]

-- characters è¡¨
turnaround_image: 'https://r2.example.com/user123/characters/1702345678902.png'
reference_images: ["https://r2.example.com/...", "https://r2.example.com/..."]

-- audio_assets è¡¨
file_url: 'https://r2.example.com/user123/audio/1702345678907.mp3'
```

**ä¼˜åŠ¿ï¼š**
- å…³ç³»å‹æ•°æ®åº“ï¼Œé€‚åˆç»“æ„åŒ–æ•°æ®
- è‡ªåŠ¨å¤‡ä»½å’Œé«˜å¯ç”¨
- å†…ç½®è®¤è¯ç³»ç»Ÿ
- Row Level Security (RLS)
- å®æ—¶è®¢é˜…åŠŸèƒ½

**æˆæœ¬ï¼š**
```
å…è´¹ç‰ˆ: 500 MB æ•°æ®åº“
Proç‰ˆ: 8 GB æ•°æ®åº“ (Â¥180/æœˆ)
```

**ç¤ºä¾‹æ•°æ®ï¼š**
```sql
-- projects è¡¨
{
  id: "uuid",
  user_id: "uuid",
  title: "æˆ‘çš„ç”µå½±é¡¹ç›®",
  description: "ä¸€éƒ¨ç§‘å¹»ç”µå½±",
  art_style: "èµ›åšæœ‹å…‹",
  scene_count: 10,
  shot_count: 45
}

-- shots è¡¨
{
  id: "uuid",
  scene_id: "uuid",
  shot_size: "Close-Up",
  description: "ä¸»è§’çš„ç‰¹å†™é•œå¤´",
  reference_image: "https://r2.domain.com/xxx.jpg", // æŒ‡å‘ R2
  video_clip: "https://r2.domain.com/xxx.mp4"      // æŒ‡å‘ R2
}
```

---

### 2. Cloudflare R2ï¼ˆåª’ä½“æ–‡ä»¶ï¼‰â­æ¨è

**å­˜å‚¨å†…å®¹ï¼š**
- âœ… æ‰€æœ‰å›¾ç‰‡ï¼ˆPNG, JPG, WebPï¼‰
- âœ… æ‰€æœ‰è§†é¢‘ï¼ˆMP4, WebMï¼‰
- âœ… æ‰€æœ‰éŸ³é¢‘ï¼ˆMP3, WAV, AACï¼‰

**ä¸ºä»€ä¹ˆé€‰æ‹© R2ï¼Ÿ**

1. **æˆæœ¬æä½**
   ```
   å­˜å‚¨: $0.015/GB/æœˆ (çº¦ Â¥0.1/GB)

   å¯¹æ¯” Supabase Storage:
   100 GB è§†é¢‘
   - Supabase: Â¥180/æœˆ (åŒ…å«åœ¨ Pro å¥—é¤)
   - R2: $1.5/æœˆ (çº¦ Â¥10/æœˆ)

   èŠ‚çœ: Â¥170/æœˆï¼
   ```

2. **å®Œå…¨å…è´¹çš„å‡ºç«™æµé‡**
   ```
   Supabase Storage: 250 GB/æœˆ æµé‡é™åˆ¶
   R2: æ— é™æµé‡ï¼Œå®Œå…¨å…è´¹ï¼

   1 TB è§†é¢‘æ’­æ”¾æµé‡:
   - Supabase: è¶…å‡ºéƒ¨åˆ†éœ€ä»˜è´¹
   - R2: Â¥0
   ```

3. **å…¨çƒ CDN åŠ é€Ÿ**
   - è‡ªåŠ¨ä½¿ç”¨ Cloudflare å…¨çƒç½‘ç»œ
   - è¶…ä½å»¶è¿Ÿ
   - è‡ªåŠ¨ç¼“å­˜ä¼˜åŒ–

4. **æ— é™å¸¦å®½**
   - ä¸é™åˆ¶å¹¶å‘è¯·æ±‚
   - é€‚åˆè§†é¢‘æµåª’ä½“

**æ–‡ä»¶ç»„ç»‡ç»“æ„ï¼š**
```
video-agent-media/  (R2 Bucket)
â”œâ”€â”€ {userId}/
â”‚   â”œâ”€â”€ projects/{projectId}/
â”‚   â”‚   â”œâ”€â”€ images/
â”‚   â”‚   â”‚   â”œâ”€â”€ 1234567890.png
â”‚   â”‚   â”‚   â””â”€â”€ 1234567891.jpg
â”‚   â”‚   â”œâ”€â”€ videos/
â”‚   â”‚   â”‚   â”œâ”€â”€ 1234567892.mp4
â”‚   â”‚   â”‚   â””â”€â”€ 1234567893.mp4
â”‚   â”‚   â”œâ”€â”€ grids/
â”‚   â”‚   â”‚   â””â”€â”€ 1234567894.png
â”‚   â”‚   â””â”€â”€ audio/
â”‚   â”‚       â”œâ”€â”€ 1234567895.mp3
â”‚   â”‚       â””â”€â”€ 1234567896.wav
â”‚   â””â”€â”€ characters/
â”‚       â””â”€â”€ 1234567897.png
```

**è®¿é—®æ–¹å¼ï¼š**
```
å…¬å¼€ URL: https://media.your-domain.com/{userId}/projects/{projectId}/images/1234567890.png

æˆ–ä½¿ç”¨ R2.dev åŸŸå: https://pub-xxxxx.r2.dev/{userId}/...
```

---

### 3. IndexedDBï¼ˆæœ¬åœ°æ¨¡å¼ï¼‰

**ä½¿ç”¨åœºæ™¯ï¼š**
- æ¸¸å®¢æ¨¡å¼ï¼ˆæœªç™»å½•ç”¨æˆ·ï¼‰
- ç¦»çº¿ç¼–è¾‘
- ä¸´æ—¶å­˜å‚¨

**å­˜å‚¨å†…å®¹ï¼š**
- å®Œæ•´çš„ Project å¯¹è±¡
- Base64 ç¼–ç çš„å›¾ç‰‡/è§†é¢‘

**ä¼˜åŠ¿ï¼š**
- å®Œå…¨ç¦»çº¿
- æ— éœ€ç™»å½•
- æ•°æ®åœ¨æœ¬åœ°æµè§ˆå™¨

**åŠ£åŠ¿ï¼š**
- æ¢æµè§ˆå™¨æ•°æ®ä¸¢å¤±
- ä¸èƒ½è·¨è®¾å¤‡è®¿é—®
- å­˜å‚¨ç©ºé—´æœ‰é™ï¼ˆå‡ ç™¾ MBï¼‰

---

## ğŸ“‚ æ—¥å¿—å­˜å‚¨ç­–ç•¥

### æ¨èæ–¹æ¡ˆï¼šåˆ†å±‚å­˜å‚¨

#### 1. å…³é”®ä¸šåŠ¡æ—¥å¿— â†’ Supabase è¡¨

**å­˜å‚¨å†…å®¹ï¼š**
- ç”¨æˆ·ç™»å½•/æ³¨å†Œ
- ç§¯åˆ†å……å€¼/æ¶ˆè´¹
- AI ç”Ÿæˆæ“ä½œï¼ˆæˆåŠŸ/å¤±è´¥ï¼‰
- æ–‡ä»¶ä¸Šä¼ è®°å½•

**æ•°æ®è¡¨è®¾è®¡ï¼š**
```sql
CREATE TABLE application_logs (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  level TEXT NOT NULL, -- 'info', 'warn', 'error'
  category TEXT NOT NULL, -- 'auth', 'credits', 'ai_generation', etc.
  message TEXT NOT NULL,
  data JSONB DEFAULT '{}',
  user_id UUID REFERENCES profiles(id),
  created_at TIMESTAMP DEFAULT NOW()
);

-- ç´¢å¼•ä¼˜åŒ–æŸ¥è¯¢
CREATE INDEX logs_user_id_idx ON application_logs(user_id, created_at DESC);
CREATE INDEX logs_category_idx ON application_logs(category);
CREATE INDEX logs_level_idx ON application_logs(level);
```

**æŸ¥è¯¢ç¤ºä¾‹ï¼š**
```sql
-- æŸ¥çœ‹ç”¨æˆ·çš„æ‰€æœ‰ç§¯åˆ†æ“ä½œ
SELECT * FROM application_logs
WHERE user_id = 'xxx' AND category = 'credits'
ORDER BY created_at DESC;

-- æŸ¥çœ‹æ‰€æœ‰ AI ç”Ÿæˆå¤±è´¥
SELECT * FROM application_logs
WHERE category = 'ai_generation' AND level = 'error'
ORDER BY created_at DESC LIMIT 100;
```

**æ•°æ®ä¿ç•™ç­–ç•¥ï¼š**
```sql
-- å®šæœŸæ¸…ç†æ—§æ—¥å¿—ï¼ˆä¿ç•™ 90 å¤©ï¼‰
DELETE FROM application_logs
WHERE created_at < NOW() - INTERVAL '90 days';
```

#### 2. é”™è¯¯è¿½è¸ª â†’ Sentryï¼ˆå¯é€‰ï¼‰

**åŠŸèƒ½ï¼š**
- è‡ªåŠ¨æ•è· JavaScript é”™è¯¯
- å †æ ˆè·Ÿè¸ª
- ç”¨æˆ·ä¸Šä¸‹æ–‡
- é”™è¯¯èšåˆå’Œå»é‡
- é‚®ä»¶/Slack é€šçŸ¥

**æˆæœ¬ï¼š**
```
å…è´¹ç‰ˆ: 5000 é”™è¯¯/æœˆ
å›¢é˜Ÿç‰ˆ: $26/æœˆ
```

**é›†æˆæ–¹å¼ï¼š**
```typescript
// sentry.client.config.ts
import * as Sentry from "@sentry/nextjs";

Sentry.init({
  dsn: process.env.NEXT_PUBLIC_SENTRY_DSN,
  tracesSampleRate: 1.0,
  environment: process.env.NODE_ENV,
});
```

#### 3. æ€§èƒ½ç›‘æ§ â†’ Vercel Analytics

**åŠŸèƒ½ï¼š**
- é¡µé¢åŠ è½½æ—¶é—´
- Core Web Vitals
- ç”¨æˆ·è®¿é—®ç»Ÿè®¡
- æµé‡åˆ†æ

**æˆæœ¬ï¼š**
```
Hobby: å…è´¹ï¼ˆæœ‰é™åŠŸèƒ½ï¼‰
Pro: åŒ…å«åœ¨ Vercel Pro ($20/æœˆ)
```

#### 4. ç”¨æˆ·è¡Œä¸ºåˆ†æ â†’ PostHogï¼ˆå¯é€‰ï¼‰

**åŠŸèƒ½ï¼š**
- ç”¨æˆ·è¡Œä¸ºè¿½è¸ª
- æ¼æ–—åˆ†æ
- Session å›æ”¾
- Feature Flags

**æˆæœ¬ï¼š**
```
å…è´¹ç‰ˆ: 1M äº‹ä»¶/æœˆ
ä»˜è´¹ç‰ˆ: $0.000225/äº‹ä»¶
```

---

## ğŸ”„ æ•°æ®æµç¤ºä¾‹

### åœºæ™¯ 1ï¼šç”¨æˆ·ä¸Šä¼ å›¾ç‰‡

```
1. ç”¨æˆ·åœ¨å‰ç«¯é€‰æ‹©å›¾ç‰‡
   â†“
2. storageService.uploadFile(file)
   â†“
3. æ£€æŸ¥ç”¨æˆ·æ˜¯å¦ç™»å½•
   â”œâ”€ æœªç™»å½• â†’ è½¬æ¢ä¸º Base64 Data URL â†’ å­˜å…¥ IndexedDB
   â””â”€ å·²ç™»å½• â†’ ä¸Šä¼ åˆ° Cloudflare R2 â†’ è¿”å›å…¬å¼€ URL
   â†“
4. å°† URL å­˜å…¥ Supabase shots è¡¨çš„ reference_image å­—æ®µ
   â†“
5. è®°å½•æ—¥å¿—ï¼šlogger.logFileUpload('image', fileSize, 'r2', true)
```

### åœºæ™¯ 2ï¼šç”¨æˆ·ç”Ÿæˆ Grid

```
1. ç”¨æˆ·ç‚¹å‡»"ç”Ÿæˆ Grid"
   â†“
2. æ£€æŸ¥ç§¯åˆ†æ˜¯å¦è¶³å¤Ÿ
   â”œâ”€ ä¸è¶³ â†’ æç¤ºå……å€¼ â†’ ç»“æŸ
   â””â”€ è¶³å¤Ÿ â†’ ç»§ç»­
   â†“
3. è°ƒç”¨ consumeCredits(10, 'generate-grid-3x3')
   â”œâ”€ æ‰£é™¤ç§¯åˆ†
   â”œâ”€ è®°å½• credit_transactions è¡¨
   â””â”€ è®°å½•æ—¥å¿—ï¼šlogger.logCreditsOperation('consume', 10, balance)
   â†“
4. è°ƒç”¨ Gemini API ç”Ÿæˆ Grid
   â”œâ”€ æˆåŠŸ â†’
   â”‚   â”œâ”€ ä¸Šä¼ åˆ° R2
   â”‚   â”œâ”€ URL å­˜å…¥ Supabase
   â”‚   â””â”€ logger.logAIGeneration('grid-3x3', 10, true)
   â””â”€ å¤±è´¥ â†’
       â”œâ”€ logger.logAIGeneration('grid-3x3', 10, false, { error })
       â””â”€ ï¼ˆå¯é€‰ï¼‰é€€è¿˜ç§¯åˆ†
```

### åœºæ™¯ 3ï¼šæ•°æ®è¿ç§»ï¼ˆæ¸¸å®¢ â†’ ç™»å½•ï¼‰

```
1. æ¸¸å®¢åˆ›å»ºäº† 5 ä¸ªé¡¹ç›®ï¼ˆå­˜åœ¨ IndexedDBï¼‰
   â†“
2. ç”¨æˆ·æ³¨å†Œå¹¶ç™»å½•
   â†“
3. æ˜¾ç¤ºè¿ç§»æç¤ºï¼š"å‘ç° 5 ä¸ªæœ¬åœ°é¡¹ç›®ï¼Œæ˜¯å¦è¿ç§»åˆ°äº‘ç«¯ï¼Ÿ"
   â†“
4. ç”¨æˆ·ç‚¹å‡»"è¿ç§»"
   â†“
5. migrationService.migrateToCloud()
   â”œâ”€ éå†æ‰€æœ‰æœ¬åœ°é¡¹ç›®
   â”œâ”€ ä¸Šä¼ æ‰€æœ‰ Base64 å›¾ç‰‡åˆ° R2
   â”œâ”€ ä¿å­˜é¡¹ç›®æ•°æ®åˆ° Supabase
   â””â”€ æ˜¾ç¤ºè¿›åº¦ï¼š"æ­£åœ¨è¿ç§»é¡¹ç›® 3/5..."
   â†“
6. è¿ç§»å®Œæˆ
   â”œâ”€ logger.log('info', 'system', 'æ•°æ®è¿ç§»å®Œæˆ', { projectCount: 5 })
   â””â”€ æç¤ºç”¨æˆ·ï¼š"è¿ç§»æˆåŠŸï¼æ˜¯å¦åˆ é™¤æœ¬åœ°æ•°æ®ï¼Ÿ"
```

---

## ğŸ’° æˆæœ¬å¯¹æ¯”

### å‡è®¾ï¼š100 ç”¨æˆ·ï¼Œæ¯äºº 10 ä¸ªé¡¹ç›®ï¼Œæ¯é¡¹ç›® 50 MB åª’ä½“æ–‡ä»¶

**æ€»å­˜å‚¨éœ€æ±‚ï¼š**
- æ–‡æœ¬æ•°æ®ï¼š~50 MBï¼ˆSupabaseï¼‰
- åª’ä½“æ–‡ä»¶ï¼š50 GBï¼ˆR2ï¼‰

**æ–¹æ¡ˆ Aï¼šå…¨ç”¨ Supabase**
```
Supabase Pro: Â¥180/æœˆ
- 8 GB æ•°æ®åº“ï¼ˆå¤Ÿç”¨ï¼‰
- 100 GB å­˜å‚¨ï¼ˆå¤Ÿç”¨ï¼‰
- 250 GB æµé‡ï¼ˆå¯èƒ½ä¸å¤Ÿï¼‰

é¢„ä¼°æˆæœ¬: Â¥180-Â¥300/æœˆ
```

**æ–¹æ¡ˆ Bï¼šSupabase + Cloudflare R2ï¼ˆæ¨èï¼‰**
```
Supabase Free: Â¥0/æœˆ
- 500 MB æ•°æ®åº“ï¼ˆå¤Ÿç”¨ï¼‰
- ä¸å­˜å‚¨åª’ä½“æ–‡ä»¶

Cloudflare R2: Â¥3.5/æœˆ
- 50 GB Ã— $0.015 = $0.75/æœˆ
- æ— é™æµé‡

æ€»æˆæœ¬: Â¥3.5/æœˆ
èŠ‚çœ: Â¥176.5/æœˆï¼
```

---

## ğŸ“‹ éƒ¨ç½²æ¸…å•

### Supabase é…ç½®

- [ ] åˆ›å»º Supabase é¡¹ç›®
- [ ] æ‰§è¡Œ `supabase/schema.sql` åˆ›å»ºè¡¨
- [ ] é…ç½® RLS ç­–ç•¥
- [ ] åˆ›å»º application_logs è¡¨ï¼ˆæ—¥å¿—ï¼‰
- [ ] åˆ›å»ºç®¡ç†å‘˜è´¦å·
- [ ] è·å– API keys

### Cloudflare R2 é…ç½®

- [ ] æ³¨å†Œ Cloudflare è´¦å·
- [ ] å¯ç”¨ R2
- [ ] åˆ›å»º bucket: `video-agent-media`
- [ ] ç”Ÿæˆ R2 API Token
  - æƒé™ï¼šObject Read & Write
- [ ] é…ç½®è‡ªå®šä¹‰åŸŸåï¼ˆå¯é€‰ï¼‰
  - æˆ–ä½¿ç”¨ R2.dev å…¬å¼€åŸŸå
- [ ] é…ç½® CORS ç­–ç•¥

**CORS é…ç½®ç¤ºä¾‹ï¼š**
```json
[
  {
    "AllowedOrigins": ["https://your-domain.com"],
    "AllowedMethods": ["GET", "PUT", "POST", "DELETE"],
    "AllowedHeaders": ["*"],
    "ExposeHeaders": ["ETag"],
    "MaxAgeSeconds": 3600
  }
]
```

### ç¯å¢ƒå˜é‡é…ç½®

- [ ] å¤åˆ¶ `.env.example` ä¸º `.env.local`
- [ ] å¡«å…¥ Supabase URL å’Œ Keys
- [ ] å¡«å…¥ R2 å‡­è¯å’Œ Endpoint
- [ ] å¡«å…¥ Gemini/Volcano API Keys
- [ ] ï¼ˆå¯é€‰ï¼‰é…ç½® Sentry DSN

### ä»£ç éƒ¨ç½²

- [ ] æ›´æ–° `app/layout.tsx` æ·»åŠ  AuthProvider
- [ ] æ›¿æ¢æ•°æ®è®¿é—®ä»£ç ä½¿ç”¨ `dataService`
- [ ] æµ‹è¯•æ–‡ä»¶ä¸Šä¼ åˆ° R2
- [ ] æµ‹è¯•ç§¯åˆ†ç³»ç»Ÿ
- [ ] éƒ¨ç½²åˆ° Vercel

---

## ğŸ” å®‰å…¨å»ºè®®

1. **R2 å‡­è¯å®‰å…¨**
   - âŒ ä¸è¦å°† R2 API Key æš´éœ²ç»™å‰ç«¯
   - âœ… é€šè¿‡ API Route ä»£ç†ä¸Šä¼ 
   - âœ… ä½¿ç”¨ç¯å¢ƒå˜é‡å­˜å‚¨å‡­è¯

2. **æ–‡ä»¶è®¿é—®æ§åˆ¶**
   - æŒ‰ç”¨æˆ· ID ç»„ç»‡æ–‡ä»¶å¤¹
   - æ£€æŸ¥ä¸Šä¼ è€…èº«ä»½
   - é™åˆ¶æ–‡ä»¶å¤§å°ï¼ˆä¾‹å¦‚ï¼šå›¾ç‰‡ 10MBï¼Œè§†é¢‘ 100MBï¼‰

3. **é˜²æ­¢æ»¥ç”¨**
   - é™åˆ¶ä¸Šä¼ é¢‘ç‡
   - æ£€æŸ¥æ–‡ä»¶ç±»å‹
   - ç—…æ¯’æ‰«æï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰

4. **æ•°æ®å¤‡ä»½**
   - Supabase è‡ªåŠ¨å¤‡ä»½ï¼ˆPro ç‰ˆï¼‰
   - R2 å®šæœŸå¯¼å‡ºï¼ˆå¯é€‰ï¼‰

---

## ğŸ“š ç›¸å…³æ–‡æ¡£

- [Cloudflare R2 å®˜æ–¹æ–‡æ¡£](https://developers.cloudflare.com/r2/)
- [Supabase Storage æ–‡æ¡£](https://supabase.com/docs/guides/storage)
- [AWS SDK for JavaScript v3](https://docs.aws.amazon.com/AWSJavaScriptSDK/v3/latest/)

---

## âœ… æ€»ç»“

**æ¨èæ¶æ„ï¼š**
```
æ–‡å­—æ•°æ® â†’ Supabase PostgreSQL (å…è´¹/Â¥180)
åª’ä½“æ–‡ä»¶ â†’ Cloudflare R2 (Â¥3-10/æœˆ)
æ—¥å¿— â†’ Supabase è¡¨ + Sentry (å¯é€‰)
```

**ä¼˜åŠ¿ï¼š**
- æˆæœ¬æœ€ä½ï¼ˆå¯èƒ½ä»… Â¥3/æœˆï¼‰
- æ€§èƒ½æœ€ä¼˜ï¼ˆå…¨çƒ CDNï¼‰
- æ‰©å±•æ€§å¼ºï¼ˆæ— é™æµé‡ï¼‰
- æ˜“äºç»´æŠ¤ï¼ˆæ‰˜ç®¡æœåŠ¡ï¼‰

**å®æ–½å»ºè®®ï¼š**
1. å…ˆç”¨å…è´¹ç‰ˆæµ‹è¯•ï¼ˆSupabase Free + R2ï¼‰
2. æœ‰ä»˜è´¹ç”¨æˆ·åå‡çº§ Supabase Pro
3. åª’ä½“æ–‡ä»¶å§‹ç»ˆç”¨ R2ï¼ˆæˆæœ¬ä¼˜åŠ¿æ˜æ˜¾ï¼‰
